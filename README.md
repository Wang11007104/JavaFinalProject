
# 2025 JAVA æœŸæœ«å°ˆæ¡ˆç¯„ä¾‹
- æˆå“¡ï¼š
  é€£ç¾½å¥B11230227
  ç‹æ˜Ÿå‡±B11007104
  
- åˆ†å·¥èªªæ˜ï¼š
  ç‹æ˜Ÿå‡±:
  ç¨‹å¼æ¶æ§‹ã€åŠŸèƒ½æ§‹æƒ³ã€ç¨‹å¼ä»‹ç´¹
  æ’°å¯«å…§å®¹(è©³æƒ…è¦‹ä¸‹æ–¹åŠŸèƒ½è¡¨):1~12
  
  é€£ç¾½å¥:
  ç¨‹å¼ä¿®æ”¹ã€ç°¡å ±ä»‹ç´¹ã€å½±ç‰‡éŒ„å½±
  æ’°å¯«å…§å®¹(è©³æƒ…è¦‹ä¸‹æ–¹åŠŸèƒ½è¡¨):3~12
  
- [å ±å‘Šå½±ç‰‡é€£çµ]()

## éŠæˆ²èªªæ˜

### 1. éŠæˆ²æµç¨‹
- æ“Šä¸­æ•µäººå¾—åˆ†
- æ‰“å€’BOSSåŠç²å‹

### 2. æ“ä½œæ–¹å¼
- ç©å®¶ç§»å‹•ï¼šä¸Šä¸‹å·¦å³
- å°„æ“Šï¼šspace
- ä½¿ç”¨æŠ€èƒ½ï¼šA
- èˆ‡å ´æ™¯äº’å‹•ï¼šé»é¸ç•«é¢æŒ‰éˆ•

## æŒ‡ä»¤åŠåŸ·è¡Œæª”èªªæ˜

### ä¸‹è¼‰å®Œæ•´repoå¾Œé–‹å•ŸTerminalåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤
```
cd .\lwjgl3\build\libs\
java -jar starwar-1.0.0.jar
```

## æª”æ¡ˆé‡é»çµæ§‹
```
JavaFinalProject\lwjgl3/
 â”£ ğŸ“‚build
 â”ƒ â”£ ğŸ“‚libs
 â”ƒ â”ƒ â”— ğŸ“œstarwar-1.0.0.jar
 â”£ ğŸ“‚src
 â”ƒ â”— ğŸ“‚main
 â”ƒ â”ƒ â”£ ğŸ“‚java
 â”ƒ â”ƒ â”ƒ â”— ğŸ“‚com
 â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“‚wxk
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“‚starwar
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“‚lwjgl3
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“œautoMonster.java
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“œDesktopLauncher.java
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“œmovingObj.java
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“œSkyWizard.java
 â”ƒ â”£ ğŸ“‚docs
 â”ƒ â”ƒ â”— ğŸ“‚javadoc
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚com
 â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“‚wxk
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“‚starwar
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“‚lwjgl3
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“œautoMonster.html
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“œDesktopLauncher.html
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“œmovingObj.html
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“œpackage-summary.html
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“œpackage-tree.html
 â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“œSkyWizard.html

JavaFinalProject\assets/
 â”£ ğŸ“œassets.txt
 â”£ ğŸ“œbgm.mp3
 â”£ ğŸ“œbigbu.png
 â”£ ğŸ“œbuttonCheat.png
 â”£ ğŸ“œbuttonIns.png
 â”£ ğŸ“œbuttonLevel.png
 â”£ ğŸ“œbuttonplay.png
 â”£ ğŸ“œdesktop.ini
 â”£ ğŸ“œdragon1.png
 â”£ ğŸ“œdragon12.png
 â”£ ğŸ“œexplode.png
 â”£ ğŸ“œfire.mp3
 â”£ ğŸ“œfire.png
 â”£ ğŸ“œfirstscreen.png
 â”£ ğŸ“œghost.png
 â”£ ğŸ“œinsSpace.png
 â”£ ğŸ“œinsSpace1.png
 â”£ ğŸ“œinsUDLR.png
 â”£ ğŸ“œinsUDLR1.png
 â”£ ğŸ“œlibgdx.png
 â”£ ğŸ“œmonfire.png
 â”£ ğŸ“œmonster2.png
 â”£ ğŸ“œredboss.png
 â”£ ğŸ“œsupper.png
 â”— ğŸ“œwizard.png
```


## ä¸€ã€SkyWizard åŸºç¤åŠŸèƒ½åˆ—è¡¨

---

### âœ… 1. éŠæˆ²åˆå§‹åŒ–èˆ‡ç•«é¢ä½ˆå±€
- å»ºç«‹éŠæˆ²è¦–çª—ï¼ˆDesktopLauncherè¨­å®šå¤§å°ã€æ¨™é¡Œã€èƒŒæ™¯é¡è‰²ï¼‰ã€‚
- è¼‰å…¥ç´ æï¼ˆcreate:åœ–ç‰‡ã€éŸ³æ•ˆã€å­—å‹ç­‰è³‡æºï¼‰ã€‚

---

### âœ… 2. ç©å®¶æ§åˆ¶ï¼ˆå·¦å³ç§»å‹•ã€ç™¼å°„å­å½ˆï¼‰
- éµç›¤è¼¸å…¥æ§åˆ¶ï¼ˆä¸Šä¸‹å·¦å³éµï¼‰ã€‚
- ç©ºç™½éµç™¼å°„å­å½ˆã€‚
- Aç™¼å°„å¤§æ‹›

---

### âœ… 3. æ•µäººç”Ÿæˆèˆ‡æ’åˆ—
- æ•µäººä»¥é™£åˆ—å’Œå¾—åˆ†å½¢å¼ç”Ÿæˆï¼Œä¸¦ç”±monModeæ±ºå®šç§»å‹•æ¨¡å¼ã€‚
- éš¨è‘—åˆ†æ•¸è¶Šé«˜å‡ºç¾ä¸åŒçš„æ€ªç‰©ã€‚

---

### âœ… 4. æ•µäººç§»å‹•é‚è¼¯
- æ•µäººç¾¤é«”æ©«å‘ç§»å‹•ã€‚
- ç¢°åˆ°é‚Šç•Œæ™‚ç¾¤é«”å¾€è¿”ã€‚
- ä¸­å¿ƒé»ä»¥æ—‹è½‰å‘å¤–

---

### âœ… 5. æ•µäººç™¼å°„å­å½ˆ
- æ•µäººå¯ä¾æ™‚é–“é–“éš”ç™¼å°„å­å½ˆã€‚
- å­å½ˆå¾€ä¸‹ç§»å‹•ï¼Œæ”»æ“Šç©å®¶ã€‚

---

### âœ… 6. ç¢°æ’åµæ¸¬ï¼ˆç©å®¶å­å½ˆ vs æ•µäººï¼‰
- å­å½ˆæ“Šä¸­æ•µäººï¼šæ•µäººè¡€é‡æ¸›ä¸€ã€å­å½ˆæ¶ˆå¤±ã€‚
- å­å½ˆæ¶ˆå¤±å¾Œç”¢ç”Ÿçˆ†ç‚¸èˆ‡éŸ³æ•ˆã€‚

---

### âœ… 7. ç¢°æ’åµæ¸¬ï¼ˆæ•µäººå­å½ˆ vs ç©å®¶ / æ•µäººæ¥è§¸ç©å®¶ï¼‰
- ç©å®¶è¢«å­å½ˆæ“Šä¸­æ‰£è¡€ï¼Œæ­»äº¡æ™‚éŠæˆ²çµæŸã€‚
- æ•µäººå’Œæ•µäººçš„å­å½ˆä¸èˆ‡æ•µäººç¢°æ’ã€‚
- ç©å®¶ç¢°åˆ°æ•µäººå¾Œæ‰£è¡€ã€‚

---

### âœ… 8. å¾—åˆ†ç³»çµ±
- æ“Šä¸­æ•µäººå¯ç²å¾—åˆ†æ•¸ã€‚
- åˆ†æ•¸é¡¯ç¤ºæ–¼ç•«é¢ã€‚

---

### âœ… 9. ç”Ÿå‘½å€¼èˆ‡éŠæˆ²çµæŸæ¢ä»¶
- ç©å®¶æ“æœ‰åˆå§‹ç”Ÿå‘½å€¼ï¼ˆ20 æ¢å‘½ï¼‰ã€‚
- ç¦½è³Šå…ˆæ“’ç‹ã€‚
- å›°é›£(ç„¡é™)æ¨¡å¼ç©å®¶æ­»å¾ŒéŠæˆ²çµæŸ

---

### âœ… 10. é—œå¡ç³»çµ±
- æ¯æ³¢Bossç´šæ•µäººçµæŸå¾Œé€²å…¥ä¸‹ä¸€é—œã€‚
- æ•µäººé€Ÿåº¦æå‡ã€æ’åˆ—è®ŠåŒ–å¢åŠ é›£åº¦ã€‚

---

### âœ… 11. éŸ³æ•ˆèˆ‡èƒŒæ™¯éŸ³æ¨‚
- åŒ…å«å°„æ“Šè²ã€é—œå¡èƒŒæ™¯éŸ³æ¨‚ã€‚

---

### âœ… 12. ä¸»é¸å–®èˆ‡é‡æ–°é–‹å§‹åŠŸèƒ½
- é¡¯ç¤ºé–‹å§‹ç•«é¢ã€æ“ä½œèªªæ˜ã€å›°é›£æ¨¡å¼ã€‚
- Game Over å¾Œå›åˆ°ä¸»é¸å–®ã€‚

---

## äºŒã€UML é¡åˆ¥åœ– (Class Diagram)

```mermaid
classDiagram
    class Constants {
        <<static>>
        +int FRAMEWIDTH
        +int FRAMEHEIGHT
        +int PLAYERWIDTH
        +int PLAYERHEIGHT
        +int PLAYERMAXLEVEL
        +int PLAYERESTUSNUM
        +int PLAYERINITIALEXP
        +int TRIANGLEWIDTH
        +int TRIANGLEHEIGHT
        +int TRIANGLEATTACKSTARTTIME
        +int TRIANGLEATTACKENDTIME
        +int TRIANGLEATTACKCOOLDOWN
        +int SMALLTRIANGLEDETECTZONE
        +int TRIANGLEDETECTZONE
        +int BIGTRIANGLEDETECTZONE
        +int playerHPLevel
        +int playerHPLevelTemp
        +double playerActualHP
        +int playerSTRLevel
        +int playerSTRLevelTemp
        +double playerActualSTR
        +int playerDEXLevel
        +int playerDEXLevelTemp
        +double playerActualDEX
        +double playerActualEnergy
        +double playerActualSpeed
        +int levelUpCost
        +float currentVolume
        +int nRuns

        +double getActualHP()
        +double getActualSTR()
        +double getActualDEX()
        +double getActualEnergy()
        +double levelUpCost()
        +double nextLevelUpCost()
    }

    class Player {
        -double x
        -double y
        -final int width
        -final int height
        -final Color color
        -int speed
        -int currentHealth
        -double currentEnergy
        -int exp
        -int estus
        -boolean invincible
        -boolean attacking
        -boolean healing
        -int attackCoolDown
        -int healingTimer
        -int healingCoolDown
        -boolean dodging
        -int dodgeTimer
        -int dodgeCoolDown
        +double dodgedx
        +double dodgedy
        +double dodgeSpeed
        -boolean knockBacking
        +double knockBackdx
        +double knockBackdy
        +int knockBackSpeed
        +int knockBackTimer
        +int knockBackCoolDown

        +Player(int, int, int, int, Color, int, int)
        +void move(boolean, boolean, boolean, boolean)
        +void dodge(boolean, boolean, boolean, boolean)
        +void knockBack(double, double, int, int)
        +void attack()
        +void getHurt(int)
        +boolean isAttacking()
        +boolean isKnockBacking()
        +boolean isDodging()
        +boolean isHealing()
        +boolean isInvincible()
        +void draw(Graphics)
        +int getHealth()
        +void increaseHealth()
        +void restoreHealth()
        +void restoreEnergy()
        +int getEstus()
        +void restoreEstus()
        +void increaseExp(int)
        +void decreaseExp(int)
        +int getExp()
        +int getEnergy()
        +double getX()
        +double getY()
        +double getCenterX()
        +double getCenterY()
        +int getWidth()
        +Rectangle getBounds()
    }
    
    Player --> Constants
    
    class PlayerUI {
        +static void draw(Graphics g, int maxHealth, int currentHealth, int maxEnergy, int currentEnergy, int exp, int estus)
    }
    
    PlayerUI --> Player

    class Enemy {
        - double x
        - double y
        - int width
        - int height
        - Color oriColor
        - Color color
        - int maxHealth
        - int currentHealth
        - int speed
        - int state
        - boolean attacking
        - boolean knockBacking
        - boolean damagePlayer
        - boolean getHurting
        - int getHurtCounter
        - int getHurtTimer
        - int attackDamage
        - double knockBackdx
        - double knockBackdy
        - int knockBackSpeed
        - int knockBackTimer
        - int detectZone
        + Enemy()
        + Enemy(int, int, int, int, Color, int, int, int)
        + void move(double, double)
        + void stateIdle(double, double)
        + void stateMove(double, double)
        + void stateKnockBack()
        + void getHurt(int)
        + void knockBack(double, double, int, int)
        + void draw(Graphics)
        + double getCenterX()
        + double getCenterY()
        + double getMaxHealth()
        + double getHealth()
        + int getDamage()
        + boolean isAttacking()
        + Rectangle getBounds()
    }
    
    Enemy --> Constants

    class Triangle {
        + double centerX
        + double centerY
        + double dx
        + double dy
        + int[] xPoints
        + int[] yPoints
        + double attackdx
        + double attackdy
        + int attackSpeed
        + int attackTimer
        + int attackStartTime
        + int attackEndTime
        + int attackCoolDown
        + Triangle(int, int, int, int, Color, int, int, int)
        + void move(double, double)
        + void stateIdle(double, double)
        + void stateMove(double, double)
        + void stateKnockBack()
        + void stateAttack(double, double)
        + void rotateTri()
        + void draw(Graphics)
        + double getCenterX()
        + double getCenterY()
        + double getHealth()
        + boolean isAttacking()
        + Rectangle getBounds()
    }

    Triangle --|> Enemy
    Triangle --> Constants
    
    class BigTriangle {
        - int phase
        - int moveType
        - int moveTypeTimer
        - int attackType
        - int attackTypeCounter
        - double rotationRadius
        - int rotateDirection
        - boolean isSummoned
        - int phaseChangeTimer
        - List<Enemy> enemiesToAdd
        + BigTriangle(int x, int y, int w, int h, Color c, int attackDamage, int health, int detectZone)
        + void move(double playerX, double playerY)
        + void draw(Graphics g)
        + void stateIdle(double playerX, double playerY)
        + void stateMove(double playerX, double playerY)
        + void stateAttack(double playerX, double playerY)
        + void statePhaseChange()
        + void getHurt(int damage)
        + int getDamage()
        + void stateKnockBack()
        + void knockBack(double x, double y, int s, int t)
        + void sprintAttack(double playerX, double playerY)
        + void heavyAttack(double playerX, double playerY)
        + void sprintsprintAttack(double playerX, double playerY)
        + void summonTriangleMinions(int num)
        + int getPhase()
    }
    
    BigTriangle --|> Triangle
    BigTriangle --> Constants

    class Bullet {
        - double x
        - double y
        - int width
        - int height
        - Color color
        - int speed
        - int damage
        - double dx
        - double dy
        + Bullet(int x, int y, int w, int h, Color c, double dx, double dy)
        + void move()
        + int getDamage()
        + boolean outOfScreen()
        + int getWidth()
        + int getHeight()
        + void draw(Graphics g)
        + Rectangle getBounds()
    }
    
    Bullet --> Player
    
    class Coin {
        - double x
        - double y
        - int width
        - int height
        - int exp
        - Color color
        - int[] xPoints
        - int[] yPoints
        - double dx
        - double dy
        + Coin(double x, double y, int exp)
        + void move()
        + void draw(Graphics g)
        + int getExp()
        + Rectangle getBounds()
    }
    
    Coin --> Player

    class CampFire {
        - int x
        - int y
        - int width
        - int interactWidth
        - int height
        + CampFire(int x, int y)
        + void draw(Graphics g)
        + void drawText(Graphics g)
        + int getCenterX()
        + int getCenterY()
        + int getWidth()
        + Rectangle getBounds()
    }
    
    CampFire --> Player

    class Explode {
        -double x
        -double y
        -double centerX
        -double centerY
        -double width
        -double height
        -double w
        -double h
        -Color color
        -int damage = 15
        -int maxHealth = 0
        -int currentHealth = 0
        +Explode(int x, int y, int w, int h, Color c, int health)
        +void getHurt(int damage)
        +void draw(Graphics g)
        +int getDamage()
        +double getCenterX()
        +double getCenterY()
        +double getHealth()
        +Rectangle getBounds()
    }
    
    Explode --> Bullet

    class SpaceInvaderPanel {
        -Timer timer1
        -Timer timer2
        -Timer timer3
        -Timer timer4
        -ArrayList~Enemy~ enemies
        -ArrayList~Bullet~ bullets
        -List~Enemy~ enemiesToAdd
        -ArrayList~Explode~ explodes
        -ArrayList~Coin~ coins
        -Player player
        -CampFire campFire
        -boolean paused
        -boolean playerInput
        -boolean enemyMove
        -boolean isGameOver
        -boolean showBonfireText
        -boolean inBonfire
        -int spawnEnemiesMaxDelay
        -int spawnEnemiesMinDelay
        -int spawnEnemiesDelay
        -int spawnEnemiesStep
        -int bigTriangleDelay
        -boolean stopSpawmEnemies
        -boolean enemyFall
        -boolean changeMusic
        -boolean wPressed
        -boolean aPressed
        -boolean sPressed
        -boolean dPressed
        -boolean ePressed
        -boolean escPressed
        -int rPressed
        -int spacePressed
        -int mouseLeftClicked
        -int mouseRightClicked
        -int leftClickX
        -int leftClickY
        -JLayeredPane layeredPane
        -JPanel settingsPanel
        -GameOverPanel gameOverPanel
        -LevelUpPanel levelUpPanel
        -MusicPlayer musicPlayer
        +SpaceInvaderPanel(JLayeredPane lp)
        +void spawnEnemies()
        +void paintComponent(Graphics g)
        +void actionPerformed(ActionEvent e)
        +void checkCollisions()
        +void deleteOutOfScreenBullets()
        +void pauseGame()
        +void resumeGame()
        +void restartGame()
        +void disablePlayerInput()
        +void keyPressed(KeyEvent e)
        +void keyReleased(KeyEvent e)
        +void keyTyped(KeyEvent e)
        +void mousePressed(MouseEvent e)
        +void mouseClicked(MouseEvent e)
        +void mouseEntered(MouseEvent e)
        +void mouseExited(MouseEvent e)
        +void mouseReleased(MouseEvent e)
        +void setSettingsPanel(SettingsPanel settingPanel)
        +void setGameOverPanel(GameOverPanel gameOverPanel)
        +void setLevelUpPanel(LevelUpPanel levelUpPanel)
        +void setMusicPlayer(MusicPlayer musicPlayer)
    }

    class StartPanel {
        -SettingsPanel settingsPanel
        -MusicPlayer musicPlayer
        +StartPanel(SpaceInvaderPanel gamePanel, MusicPlayer musicPlayer)
        +void styleTextOnlyButton(JButton button)
        +void setSettingsPanel(SettingsPanel settingPanel)
        +void setMusicPlayer(MusicPlayer musicPlayer)
    }

class SettingsPanel {
        -StartPanel startPanel
        -JLayeredPane layeredPane
        -boolean isBlackBackground
        -boolean showResumeButton
        -MusicPlayer musicPlayer
        -JButton resumeButton

        +SettingsPanel(SpaceInvaderPanel gamePanel, StartPanel startPanel, JLayeredPane layeredPane, MusicPlayer musicPlayer)
        +JPanel createVolumeControlPanel()
        +void customizeButton(JButton button)
        +void styleTextOnlyButton(JButton button)
        +void setBlackBackground(boolean isBlackBackground)
        +void setStartPanel(StartPanel startPanel)
        +void setMusicPlayer(MusicPlayer musicPlayer)
        +void showResumeButton(boolean show)
        +void paintComponent(Graphics g)
    }
    
    class LevelUpPanel {
        -boolean confirmLevelUp
        -SpaceInvaderPanel gamePanel
        -MusicPlayer musicPlayer
        -JLabel hpTextLabel
        -JLabel strTextLabel
        -JLabel dexTextLabel
        -JLabel totalLevelLabel
        -JLabel nextLevelUpCostLabel
        -JLabel currentExpLabel

        +LevelUpPanel(SpaceInvaderPanel gamePanel, MusicPlayer musicPlayer)
        +JPanel createLevelInfoPanel()
        +JPanel createLevelControlPanel()
        +JPanel createConfirmExitPanel()
        +void addHPUI(JPanel panel)
        +void addSTRUI(JPanel panel)
        +void addDEXUI(JPanel panel)
        +void setupStatPanel(JPanel panel, String labelName, StatGetter baseLevelGetter, StatGetter tempLevelGetter, StatSetter tempLevelSetter, StatLabelSetter textSetter, StatLabelGetter labelGetter)
        +void confirmLevelUp()
        +void exitLevelUp()
        +void updateLevelInfo()
        +void styleTextOnlyButton(JButton button)
        +void paintComponent(Graphics g)
        +void setMusicPlayer(MusicPlayer musicPlayer)
    }
    
    class GameOverPanel {
        -float alpha
        -Timer fadeTimer
        -Timer restartTimer
        -SpaceInvaderPanel gamePanel
        -MusicPlayer musicPlayer
        
        +GameOverPanel(SpaceInvaderPanel gamePanel, MusicPlayer musicPlayer)
        +void triggerFadeIn()
        +void paintComponent(Graphics g)
    }
    
    class MusicPlayer {
        -Map<String, List<Clip>> clipPool
        -float currentVolume
        +MusicPlayer()
        +void load(String id, String filepath, int count)
        +void playSegment(String id, float startSec, float endSec, boolean loop)
        +void stopById(String id)
        +void stopAll()
        +void adjustVolume(float delta)
        +void setVolume(float v)
        +float getCurrentVolume()
        +String getVolumeText()
        -void applyVolume(Clip clip)
    }
    
    
    
    SpaceInvaderPanel --> SettingsPanel
    SpaceInvaderPanel --> LevelUpPanel
    SpaceInvaderPanel --> GameOverPanel
    
    StartPanel --> SpaceInvaderPanel
    SettingsPanel --> SpaceInvaderPanel
    LevelUpPanel --> SpaceInvaderPanel
    GameOverPanel --> SpaceInvaderPanel
    
    SpaceInvaderPanel --> MusicPlayer
    StartPanel --> MusicPlayer
    SettingsPanel --> MusicPlayer
    LevelUpPanel --> MusicPlayer
    GameOverPanel --> MusicPlayer
    
    SpaceInvaderPanel --> Constants
    SettingsPanel --> Constants
    LevelUpPanel --> Constants
    GameOverPanel --> Constants

```

## ä¸‰ã€æµç¨‹åœ– (Flow Chart)

```mermaid
flowchart TD

    Start(["Start"]) --> Create["create(): åˆå§‹åŒ–è³‡æºã€è§’è‰²ã€æŒ‰éˆ•ã€èƒŒæ™¯éŸ³æ¨‚"]
    Create --> Render["render(): éŠæˆ²ä¸»è¿´åœˆ"]

    Render --> CheckStageEvent{"stageEvent å€¼?"}

    %% ========== Main Menu ==========
    CheckStageEvent -- 0 --> Menu["é¡¯ç¤ºä¸»é¸å–® (firstscreen.png)"]
    Menu --> BtnPlay["é»æ“Š buttonPlay"] -->|stageEvent=1| Render
    Menu --> BtnIns["é»æ“Š buttonIns"] -->|stageEvent=2| Render
    Menu --> BtnLevel["é»æ“Š buttonLevel"] -->|stageEvent=3| Render

    %% ========== Instruction Pages ==========
    CheckStageEvent -- 2 --> Instruction1["é¡¯ç¤ºèªªæ˜é é¢ insSpace1"]
    Instruction1 --> ClickTo21["é»æ“Šè¢å¹•"] -->|stageEvent=21| Render

    CheckStageEvent -- 21 --> Instruction2["é¡¯ç¤ºèªªæ˜é é¢ insUDLR1"]
    Instruction2 --> ClickTo0["é»æ“Šè¢å¹•"] -->|stageEvent=0| Render

    %% ========== Gameplay ==========
    CheckStageEvent -- 1 --> Game["éŠæˆ²ç•«é¢é–‹å§‹"]

    Game --> TimerCheck["ç¬¬ä¸€æ¬¡é€²å…¥æ™‚: å•Ÿå‹• Timer ç”¢ç”Ÿæ€ªç‰©"]
    Game --> KeyInput["keyClicked(): æ–¹å‘éµæ§åˆ¶ç§»å‹• & ç™¼å°„ SPACE"]
    KeyInput --> AddBullet["ç”¢ç”Ÿ wizardBullet ä¸¦åŠ å…¥ allObjs"]

    Game --> UpdateLoop["éæ­· allObjs åŸ·è¡Œ update() & draw()"]
    UpdateLoop --> CheckCollision{"æ˜¯å¦å­å½ˆç¢°åˆ°æ€ªç‰©ï¼Ÿ"}

    CheckCollision -- æ˜¯ --> Damage["æ€ªç‰©è¡€é‡ -1, POINT+1"]
    Damage --> IsDead{"è¡€é‡ <= 0ï¼Ÿ"}
    IsDead -- æ˜¯ --> RemoveMonster["ç§»é™¤æ€ªç‰©"]
    IsDead -- å¦ --> SkipDamage["ä¸åšäº‹"]

    CheckCollision -- å¦ --> ContinueGame["æŒçºŒéŠæˆ²"]

    UpdateLoop --> CheckWin{"monster3 æ˜¯å¦æ­»äº¡ï¼Ÿ"}
    CheckWin -- æ˜¯ --> Win["Win: æ¸…é™¤æ‰€æœ‰ç‰©ä»¶, é‡è¨­è³‡æ–™, è¿”å› Menu"]
    CheckWin -- å¦ --> CheckLose

    CheckLose{"æ˜¯å¦åªå‰© wizardPlayerï¼Ÿ"}
    CheckLose -- æ˜¯ --> Lose["Lose: æ¸…é™¤æ‰€æœ‰ç‰©ä»¶, é‡è¨­è³‡æ–™, è¿”å› Menu"]
    CheckLose -- å¦ --> Render

    %% ========== Others ==========
    CheckStageEvent -- 3 --> Cheat["ä½œå¼Šæ¨¡å¼ (æœªå¯¦ä½œç•«é¢)"] --> Render

    Win --> Render
    Lose --> Render
    ContinueGame --> Render
    RemoveMonster --> Render
    SkipDamage --> Render
    AddBullet --> Render
    TimerCheck --> Render

```

## å››ã€åºåˆ—åœ– (Sequence Diagram)

```mermaid
sequenceDiagram
    participant Player
    participant SpaceInvaderPanel
    participant Timer1
    participant Timer2
    participant Timer3
    participant Timer4
    participant Enemy
    participant Bullet
    participant Explode
    participant Coin
    participant CampFire
    participant MusicPlayer
    participant GameOverPanel
    participant LevelUpPanel
    participant SettingsPanel

    SpaceInvaderPanel ->> Player: Create player instance
    SpaceInvaderPanel ->> CampFire: Create campfire instance
    SpaceInvaderPanel ->> Timer1: Start timer1 (15ms interval)
    SpaceInvaderPanel ->> Timer2: Start timer2 (big triangle delay)
    SpaceInvaderPanel ->> Timer4: Start timer4 (enemy spawn delay)

    Timer1 ->> SpaceInvaderPanel: actionPerformed
    SpaceInvaderPanel ->> Player: Move player
    SpaceInvaderPanel ->> Enemy: Move enemies (if enabled)
    SpaceInvaderPanel ->> Bullet: Move bullets
    SpaceInvaderPanel ->> SpaceInvaderPanel: Check collisions
    SpaceInvaderPanel ->> SpaceInvaderPanel: Check bonfire interaction
    SpaceInvaderPanel ->> SpaceInvaderPanel: Repaint screen

    Timer2 ->> SpaceInvaderPanel: Spawn BigTriangle
    SpaceInvaderPanel ->> Enemy: Add BigTriangle
    SpaceInvaderPanel ->> MusicPlayer: Play BigTriangle Phase 1 music

    Timer3 ->> SpaceInvaderPanel: BigTriangle defeated, play phase 2
    SpaceInvaderPanel ->> MusicPlayer: Play BigTriangle Phase 2 music

    Timer4 ->> SpaceInvaderPanel: Spawn regular enemies
    SpaceInvaderPanel ->> Enemy: Create new Triangle instances
    SpaceInvaderPanel ->> MusicPlayer: Play enemy spawn sound

    SpaceInvaderPanel ->> Bullet: Fire bullet (on left click)
    SpaceInvaderPanel ->> MusicPlayer: Play fireball sound

    SpaceInvaderPanel ->> Player: Dodge (on space press)
    SpaceInvaderPanel ->> MusicPlayer: Play dodge sound

    SpaceInvaderPanel ->> Player: Heal (on 'R' press)
    SpaceInvaderPanel ->> MusicPlayer: Play heal sound

    SpaceInvaderPanel ->> Player: Game Over (on death)
    SpaceInvaderPanel ->> GameOverPanel: Trigger game over screen
    SpaceInvaderPanel ->> MusicPlayer: Play game over sound

    Player ->> CampFire: Check for bonfire interaction
    SpaceInvaderPanel ->> LevelUpPanel: Show level-up panel on bonfire interaction

    SpaceInvaderPanel ->> SettingsPanel: Pause game on ESC press
    SpaceInvaderPanel ->> MusicPlayer: Adjust volume on BigTriangle phase change

```
